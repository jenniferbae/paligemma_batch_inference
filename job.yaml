# View the docs https://docs.anyscale.com/reference/job-api#jobconfig.

name: image-caption-batch-job

# Use Anyscale's base image
image_uri: anyscale/ray:2.44.1-slim-py312-cu128

# Set environment variables
env_vars:
  HF_TOKEN: "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"

# Use Git repository as working directory
working_dir: git+https://github.com/jenniferbae/paligemma_batch_inference.git

# Specify required packages
runtime_env:
  pip:
    - "ray[data]>=2.44.1"
    - "transformers>=4.36.0"
    - "accelerate>=0.25.0"
    - "torch>=2.1.0"
    - "huggingface-hub>=0.19.0"
    - "fsspec>=2023.9.0"
    - "Pillow>=10.0.0"
    - "numpy>=1.24.0"
    - "requests>=2.31.0"

entrypoint: python main.py

# If there is an error, do not retry.
max_retries: 0